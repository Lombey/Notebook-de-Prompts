<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notebook de Prompts | üìì Tracker</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        // Agregamos GoogleAuthProvider y signInWithPopup
        import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, query, orderBy, onSnapshot, addDoc, updateDoc, doc, deleteDoc, serverTimestamp, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        setLogLevel('silent'); 

        const APP_VERSION = "1.1.0"; // Actualizamos versi√≥n por la nueva feature de Login

        // --- 1. CONFIGURACI√ìN FIREBASE ---
        const firebaseConfig = {
            apiKey: "AIzaSyDiv3Dal5XTN9-QE8aplHtPBa5BfhTEg3c",
            authDomain: "notebook-de-promps.firebaseapp.com",
            projectId: "notebook-de-promps",
            storageBucket: "notebook-de-promps.firebasestorage.app",
            messagingSenderId: "224921796940",
            appId: "1:224921796940:web:c03185504d102f58e8cfe9"
        };
        const appId = firebaseConfig.projectId; 

        let db = null;
        let auth = null;
        let userId = null;
        let promptsRef = null;
        let allPrompts = []; 
        let editingId = null; 
        let unsubscribe = null; // Para detener la escucha al salir

        // --- ICONOS SVG ---
        const icons = {
            copy: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>`,
            check: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>`,
            trash: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>`,
            edit: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>`,
            save: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" /></svg>`,
            update: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>`,
            search: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>`,
            google: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z" fill="#FBBC05"/><path d="M12 4.66c1.61 0 3.06.56 4.21 1.64l3.15-3.15C17.45 1.09 14.97 0 12 0 7.7 0 3.99 2.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>`,
            logout: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>`
        };

        // Inyectar versi√≥n en el DOM al cargar
        document.addEventListener('DOMContentLoaded', () => {
            const versionElement = document.getElementById('app-version-display');
            if(versionElement) versionElement.textContent = `v${APP_VERSION}`;
        });

        if (firebaseConfig.apiKey) {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            const googleProvider = new GoogleAuthProvider();

            // --- 2. AUTH ---
            const loginScreen = document.getElementById('login-screen');
            const appScreen = document.getElementById('app-screen');
            const userAvatar = document.getElementById('user-avatar');
            const userNameDisplay = document.getElementById('user-name-display');

            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    // USUARIO LOGUEADO
                    userId = user.uid;
                    
                    // Actualizar UI con datos del usuario
                    userNameDisplay.textContent = user.displayName || user.email || 'Usuario';
                    if (user.photoURL) {
                        userAvatar.src = user.photoURL;
                        userAvatar.classList.remove('hidden');
                    }

                    // Cambiar pantallas
                    loginScreen.classList.add('hidden');
                    appScreen.classList.remove('hidden');

                    promptsRef = collection(db, 'artifacts', appId, 'users', userId, 'prompts'); 
                    listenForPrompts();
                } else {
                    // USUARIO NO LOGUEADO
                    userId = null;
                    if(unsubscribe) unsubscribe(); // Dejar de escuchar cambios
                    
                    // Cambiar pantallas
                    loginScreen.classList.remove('hidden');
                    appScreen.classList.add('hidden');
                }
            });

            // Funci√≥n Login Google
            window.loginWithGoogle = async function() {
                const btn = document.getElementById('google-login-btn');
                const originalText = btn.innerHTML;
                try {
                    btn.innerHTML = `${icons.google} <span class="ml-2">Conectando...</span>`;
                    btn.disabled = true;
                    await signInWithPopup(auth, googleProvider);
                } catch (error) {
                    console.error("Login Error:", error);
                    let msg = "Error al iniciar sesi√≥n.";
                    if (error.code === 'auth/unauthorized-domain') {
                        msg = "‚ùå Dominio no autorizado en Firebase. Agrega este dominio en la consola.";
                    }
                    showModal(msg);
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                }
            }

            // Funci√≥n Logout
            window.logout = function() {
                signOut(auth);
            }

            // --- 3. L√ìGICA DE NEGOCIO ---

            function listenForPrompts() {
                if (!promptsRef) return;
                const q = query(promptsRef, orderBy("createdAt", "desc"));
                
                // Mostrar loading en la lista mientras carga
                const list = document.getElementById('prompts-list');
                list.innerHTML = `<div class="col-span-full text-center p-12 animate-pulse text-gray-400">Cargando tus prompts...</div>`;

                unsubscribe = onSnapshot(q, (snapshot) => {
                    allPrompts = []; 
                    snapshot.forEach(doc => {
                        allPrompts.push({ id: doc.id, ...doc.data() });
                    });
                    filterPrompts(); 
                }, (error) => {
                     console.error("Snapshot Error:", error);
                     list.innerHTML = `<div class="col-span-full text-center p-12 text-red-400">Error cargando datos. Verifica tu conexi√≥n.</div>`;
                });
            }

            // Gesti√≥n visual del bot√≥n
            function setButtonState(state) {
                const btn = document.getElementById('save-button');
                const btnText = document.getElementById('save-btn-text');
                const btnIcon = document.getElementById('save-btn-icon');
                
                btn.className = 'w-full font-medium py-3 px-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 flex items-center justify-center gap-2 text-white';
                const isEdit = !!editingId;
                btnText.textContent = isEdit ? 'Actualizar Prompt' : 'Guardar Prompt';
                btnIcon.innerHTML = isEdit ? icons.update : icons.save;

                if (state === 'loading') {
                    btn.disabled = true;
                    btn.classList.add(isEdit ? 'bg-indigo-500' : 'bg-blue-500', 'cursor-not-allowed', 'opacity-80');
                } else {
                    btn.disabled = false;
                    btn.classList.add(isEdit ? 'bg-indigo-600' : 'bg-blue-600', isEdit ? 'hover:bg-indigo-700' : 'hover:bg-blue-700');
                }
            }
            
            window.resetForm = function() {
                document.getElementById('add-prompt-form').reset();
                editingId = null;
                setButtonState('idle');
                document.getElementById('prompt-title').focus();
            }

            document.getElementById('add-prompt-form').addEventListener('submit', async (e) => {
                e.preventDefault();
                if (!promptsRef) return;

                const titleInput = document.getElementById('prompt-title');
                const contentInput = document.getElementById('prompt-content');

                const promptData = {
                    title: titleInput.value.trim(),
                    content: contentInput.value.trim(),
                    updatedAt: serverTimestamp()
                };

                if (!editingId) {
                    promptData.createdAt = serverTimestamp();
                    promptData.version = 1;
                } else {
                    const originalPrompt = allPrompts.find(p => p.id === editingId);
                    promptData.version = (originalPrompt.version || 1) + 1;
                }

                try {
                    setButtonState('loading');
                    
                    if (editingId) {
                        const docRef = doc(promptsRef, editingId);
                        await updateDoc(docRef, promptData);
                        showToast(`‚úÖ Prompt actualizado a v${promptData.version}`);
                    } else {
                        await addDoc(promptsRef, promptData);
                        showToast('‚úÖ Prompt guardado (v1)');
                    }
                    window.resetForm(); 

                } catch (error) {
                    console.error("Error save:", error);
                    showModal('Error al guardar. Intenta nuevamente.');
                    setButtonState('idle');
                }
            });

            window.editPrompt = function(id) {
                const prompt = allPrompts.find(p => p.id === id);
                if (!prompt) return;

                document.getElementById('prompt-title').value = prompt.title;
                document.getElementById('prompt-content').value = prompt.content;
                
                editingId = id;
                setButtonState('idle'); 

                document.getElementById('add-prompt-form').scrollIntoView({ behavior: 'smooth' });
                document.getElementById('prompt-content').focus();
            }

            window.deletePrompt = async function(id, title) {
                if (!confirm(`¬øEliminar "${title}"?`)) return;
                try {
                    deleteDoc(doc(promptsRef, id));
                    if (editingId === id) window.resetForm(); 
                } catch (error) {
                    showModal('Error al eliminar.');
                }
            }

            window.copyPrompt = function(id, btnElement) {
                const prompt = allPrompts.find(p => p.id === id);
                if (!prompt) return;

                if (navigator.clipboard && window.isSecureContext) {
                    navigator.clipboard.writeText(prompt.content).then(() => showCopyFeedback(btnElement));
                } else {
                    const textArea = document.createElement("textarea");
                    textArea.value = prompt.content;
                    textArea.style.position = "fixed"; 
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    try {
                        document.execCommand('copy');
                        showCopyFeedback(btnElement);
                    } catch (err) {}
                    document.body.removeChild(textArea);
                }
            }

            function showCopyFeedback(btn) {
                const originalContent = btn.innerHTML;
                btn.innerHTML = icons.check;
                btn.classList.add('text-green-600', 'bg-green-50');
                setTimeout(() => {
                    btn.innerHTML = icons.copy; 
                    btn.classList.remove('text-green-600', 'bg-green-50');
                }, 1500);
            }

            window.renderPrompts = function(promptsToDisplay) {
                const list = document.getElementById('prompts-list');
                list.innerHTML = ''; 

                if (promptsToDisplay.length === 0) {
                     list.innerHTML = '<div class="col-span-full text-center p-12 text-gray-400 bg-white border border-dashed border-gray-300 rounded-xl">Sin resultados</div>';
                     return;
                }

                promptsToDisplay.forEach(prompt => {
                    const card = document.createElement('div');
                    card.className = 'group bg-white border border-gray-100 hover:border-blue-200 p-5 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 flex flex-col h-full';
                    
                    const version = prompt.version ? `v${prompt.version}` : 'v1';

                    card.innerHTML = `
                        <div class="flex-grow">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="font-bold text-gray-800 truncate pr-2"></h3>
                                <span class="version-badge text-xs font-mono text-gray-400 bg-gray-50 px-2 py-1 rounded-md border border-gray-100 shrink-0 select-none">${version}</span>
                            </div>
                            <p class="text-gray-500 text-sm whitespace-pre-wrap line-clamp-4"></p> 
                        </div>
                        <div class="flex justify-end items-center space-x-2 mt-4 pt-4 border-t border-gray-50 opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity actions-container"></div>
                    `;

                    card.querySelector('h3').textContent = prompt.title;
                    card.querySelector('p').textContent = prompt.content;

                    const actionsContainer = card.querySelector('.actions-container');

                    const btnEdit = document.createElement('button');
                    btnEdit.className = 'p-2 rounded-lg text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 transition-colors';
                    btnEdit.title = 'Editar';
                    btnEdit.innerHTML = icons.edit;
                    btnEdit.onclick = () => window.editPrompt(prompt.id);
                    
                    const btnCopy = document.createElement('button');
                    btnCopy.className = 'p-2 rounded-lg text-gray-400 hover:text-blue-600 hover:bg-blue-50 transition-colors';
                    btnCopy.title = 'Copiar';
                    btnCopy.innerHTML = icons.copy;
                    btnCopy.onclick = function() { window.copyPrompt(prompt.id, this); };

                    const btnDelete = document.createElement('button');
                    btnDelete.className = 'p-2 rounded-lg text-gray-400 hover:text-red-600 hover:bg-red-50 transition-colors';
                    btnDelete.title = 'Eliminar';
                    btnDelete.innerHTML = icons.trash;
                    btnDelete.onclick = () => window.deletePrompt(prompt.id, prompt.title);

                    actionsContainer.appendChild(btnEdit);
                    actionsContainer.appendChild(btnCopy);
                    actionsContainer.appendChild(btnDelete);

                    list.appendChild(card);
                });
            }

            window.filterPrompts = function() {
                const term = document.getElementById('search-input').value.toLowerCase().trim();
                if (!term) { window.renderPrompts(allPrompts); return; }
                const filtered = allPrompts.filter(p => 
                    p.title.toLowerCase().includes(term) || p.content.toLowerCase().includes(term)
                );
                window.renderPrompts(filtered);
            }
        }
        
        function showModal(msg) {
            document.getElementById('modal-message').textContent = msg;
            document.getElementById('custom-modal').classList.remove('hidden');
        }
        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => toast.classList.add('translate-y-20', 'opacity-0'), 2500);
        }
        window.closeModal = () => document.getElementById('custom-modal').classList.add('hidden');
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f9fafb; }
        .line-clamp-4 {
            display: -webkit-box;
            -webkit-line-clamp: 4;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>
</head>
<body class="text-gray-700 bg-gray-50 min-h-screen">

    <!-- PANTALLA DE LOGIN (Se muestra si no hay usuario) -->
    <div id="login-screen" class="hidden min-h-screen flex flex-col items-center justify-center p-4">
        <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md text-center border border-gray-100">
            <div class="mb-6 flex justify-center text-blue-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
            </div>
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Notebook de Prompts</h1>
            <p class="text-gray-500 mb-8">Gestiona y organiza tus prompts de forma segura.</p>
            
            <button id="google-login-btn" onclick="loginWithGoogle()" 
                class="w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all duration-200 shadow-sm hover:shadow-md">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z" fill="#FBBC05"/><path d="M12 4.66c1.61 0 3.06.56 4.21 1.64l3.15-3.15C17.45 1.09 14.97 0 12 0 7.7 0 3.99 2.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
                Continuar con Google
            </button>
            <p class="text-xs text-gray-400 mt-6">Versi√≥n <span id="login-version-display">v1.1.0</span></p>
        </div>
    </div>

    <!-- PANTALLA PRINCIPAL DE LA APP (Se muestra al loguear) -->
    <div id="app-screen" class="max-w-4xl mx-auto p-4 sm:p-8 hidden">
        <!-- Header Minimalista -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-10 pb-6 border-b border-gray-200">
            <div>
                <h1 class="text-2xl font-bold text-gray-900 tracking-tight flex items-center gap-2">
                    <span class="text-blue-600"><!-- Icono Rocket -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                    </span>
                    Notebook de Prompts
                    <span id="app-version-display" class="ml-2 text-xs font-mono font-normal text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full border border-gray-200">v1.1.0</span>
                </h1>
                <p class="text-sm text-gray-400 mt-1 pl-10">Gestiona tu conocimiento</p>
            </div>
            
            <div class="flex items-center gap-3 mt-4 md:mt-0">
                <div class="text-right">
                    <p id="user-name-display" class="text-sm font-medium text-gray-700">Usuario</p>
                    <button onclick="logout()" class="text-xs text-red-500 hover:text-red-600 font-medium">Cerrar sesi√≥n</button>
                </div>
                <img id="user-avatar" src="" alt="Avatar" class="h-10 w-10 rounded-full border border-gray-200 hidden">
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- Columna Izquierda: Formulario (Sticky en Desktop) -->
            <div class="lg:col-span-1">
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 sticky top-8">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wider flex items-center gap-2">
                            Nuevo Prompt
                        </h2>
                        <!-- Bot√≥n Limpiar/Cancelar -->
                        <button onclick="resetForm()" class="text-gray-400 hover:text-red-500 text-xs flex items-center gap-1 transition-colors" title="Limpiar formulario">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                            Limpiar
                        </button>
                    </div>
                    
                    <form id="add-prompt-form" class="space-y-4">
                        <div>
                            <label class="block text-xs font-medium text-gray-400 mb-1">T√≠tulo</label>
                            <input type="text" id="prompt-title" placeholder="Ej: F√≠sica Cu√°ntica" required
                                class="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-100 focus:border-blue-400 outline-none transition-all">
                        </div>
                        
                        <div>
                            <label class="block text-xs font-medium text-gray-400 mb-1">Contenido</label>
                            <textarea id="prompt-content" placeholder="Escribe el prompt..." required
                                class="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg text-sm h-40 resize-none focus:ring-2 focus:ring-blue-100 focus:border-blue-400 outline-none transition-all"></textarea>
                        </div>
                        
                        <button id="save-button" type="submit" 
                            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 flex items-center justify-center gap-2">
                            <span id="save-btn-icon">
                                <!-- Icono Save -->
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" /></svg>
                            </span>
                            <span id="save-btn-text">Guardar Prompt</span>
                        </button>
                    </form>
                </div>
            </div>

            <!-- Columna Derecha: Lista y Buscador -->
            <div class="lg:col-span-2 space-y-6">
                
                <!-- Buscador con Icono Integrado -->
                <div class="relative group">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400 group-focus-within:text-blue-500 transition-colors">
                        <!-- Icono Lupa -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                    </div>
                    <input type="text" id="search-input" placeholder="Buscar..." oninput="filterPrompts()"
                        class="w-full pl-10 pr-4 py-3 bg-white border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-50 focus:border-blue-300 outline-none transition-all shadow-sm">
                </div>

                <!-- Lista de Cards -->
                <div id="prompts-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- JS inyectar√° las cards aqu√≠ -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification (Feedback sutil) -->
    <div id="toast" class="fixed bottom-6 right-6 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg text-sm transform translate-y-20 opacity-0 transition-all duration-300 pointer-events-none z-50">
        Acci√≥n completada
    </div>

    <!-- Modal Error -->
    <div id="custom-modal" class="hidden fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-2xl p-6 max-w-sm w-full border border-gray-100">
            <h3 class="text-red-500 font-bold mb-2">Atenci√≥n</h3>
            <p id="modal-message" class="text-gray-600 text-sm mb-6"></p>
            <button onclick="closeModal()" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 rounded-lg text-sm transition-colors">
                Cerrar
            </button>
        </div>
    </div>

</body>
</html>
